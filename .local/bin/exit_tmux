#!/bin/env bash
# Exit tmux started by `start_tmux`.
# Just a convenience script to signal the parent program and kill the session.
#
# Signals:
#   0 = exitted successfully
#   1 = tmux not started by `start_tmux`, or other

if [ -z "$TMUX_PPID" ]; then
  echo "tmux not started by \`start_tmux\`."
  exit 1
fi

kill -s USR1 "$TMUX_PPID"
sleep 0.15 # Give it time to propagate.
tmux kill-session -t "SH$TMUX_PPID"
exit 0
